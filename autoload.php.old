<?php

function auto_select_a_dir($dir, $file, $return = false) {
    if (file_exists($dir . "/" . $file)) {
        return $dir . "/" . $file;
    }

    foreach (scandir($dir) as $item) {
        if ($return) {
            continue;
        }

        if ($item == '.' || $item == '..') {
            continue;
        }

        if (is_dir($dir . "/" . $item)) {
            $return = auto_select_a_dir($dir . "/" . $item, $file, $return);
        }
    }

    return $return;
}

spl_autoload_register(function ($classname) {
    $filename = $classname . '.php';

    // classes dir
        if (file_exists(auto_select_a_dir(__DIR__ . "/classes", $filename))) {
            $file_location = auto_select_a_dir(__DIR__ . "/classes", $filename);
            require $file_location;
        }
    // /classes dir

    // controller dir
        if (file_exists(auto_select_a_dir(__DIR__ . "/controller", $filename))) {
            $file_location = auto_select_a_dir(__DIR__ . "/controller", $filename);
            require $file_location;
        }
    // /controller dir
});